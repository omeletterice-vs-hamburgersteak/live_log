<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>ライブ参戦記録アプリ</title>
  <!-- ここにCSSやJSのリンクを追加 -->
</head>
<body>
  <div class="container mx-auto p-4 bg-[#FFF0F5]">
    <h1 class="text-3xl text-center font-kaisei text-[#663300] mb-4">参戦したライブ・イベント一覧</h1>

    <table class="table-auto w-full border-collapse border border-gray-300 mt-4">
      <thead>
        <tr class="text-[#663300]">
          <th class="border border-gray-300 px-2 py-1">
            <% current_direction = params[:direction] == "desc" ? "desc" : "asc" %>
            <% next_direction = current_direction == "asc" ? "desc" : "asc" %>

            <%= link_to root_path(sort: "title", direction: next_direction) do %>
              タイトル
              <% if current_direction == "asc" %>
                ▲
              <% else %>
                ▼
              <% end %>
            <% end %>
          </th>
          <th class="border border-gray-300 px-2 py-1">
            <% current_direction = params[:direction] == "desc" ? "desc" : "asc" %>
            <% next_direction = current_direction == "asc" ? "desc" : "asc" %>

            <%= link_to root_path(sort: "date", direction: next_direction) do %>
              開催日
              <% if current_direction == "asc" %>
                ▲
              <% else %>
                ▼
              <% end %>
            <% end %>
          </th>
          <th class="border border-gray-300 px-2 py-1">出演者</th>
          <th class="border border-gray-300 px-2 py-1">
            <% current_direction = params[:direction] == "desc" ? "desc" : "asc" %>
            <% next_direction = current_direction == "asc" ? "desc" : "asc" %>

            <%= link_to root_path(sort: "venue", direction: next_direction) do %>
              会場
              <% if current_direction == "asc" %>
                ▲
              <% else %>
                ▼
              <% end %>
            <% end %>
          </th>
          
          <th class="border border-gray-300 px-2 py-1">操作</th>
        </tr>
      </thead>
      <tbody>
        <% @live_events.order(created_at: :desc).each do |event| %>
          <tr>
            <td class="border border-gray-300 px-2 py-1"><%= link_to event.title, live_event_path(event) %></td>
            <td class="border border-gray-300 px-2 py-1"><%= event.date.strftime("%Y-%m-%d") %></td>
            <td class="border border-gray-300 px-2 py-1"><%= event.artist %></td>
            <td class="border border-gray-300 px-2 py-1"><%= event.venue %></td>
            <td class="border border-gray-300 px-2 py-1">
              <%= link_to "編集", edit_live_event_path(event), class: "text-green-600 hover:underline mr-2" %>
              <%= link_to "削除", live_event_path(event), 
                  data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？"}, class: "text-red-600 hover:underline" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <div class="mt-6 text-right">
      <%= link_to "新しいライブを追加", new_live_event_path, class: "bg-[#6a5acd] hover:bg-[#7b68ee] text-white font-bold py-2 px-4 rounded" %>
    </div>
  </div>
</body>
</html>
